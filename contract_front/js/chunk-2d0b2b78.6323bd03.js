(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2b78"],{"24ff":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{ref:"cardAction",attrs:{title:t.$t("pages.newContracts.title")}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-table",{attrs:{id:"my-table","per-page":t.perPage,"current-page":t.currentPage,"head-variant":"",hover:"",responsive:"",items:t.getContracts,fields:t.fields,bordered:""},scopedSlots:t._u([{key:"head()",fn:function(e){return[n("span",{staticClass:"text-primary",staticStyle:{"font-size":"18px"}},[t._v(t._s(e.label))])]}},{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-dark my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v(" Loading... ")])],1)]},proxy:!0},{key:"cell(id)",fn:function(e){return[t._v(" "+t._s(e.item.id)+" ")]}},{key:"cell(created_at)",fn:function(e){return[t._v(" "+t._s(new Date(e.item.created_at).toDateString())+" ")]}},{key:"cell(is_mosque)",fn:function(e){return[t._v(" "+t._s("1"===e.item.is_mosque?t.$t("message.yes"):t.$t("message.no"))+" ")]}},{key:"cell(status)",fn:function(e){return[t._v(" "+t._s(t._f("status")(e.item.status))+" ")]}},{key:"cell(actions)",fn:function(e){return[t.check(e.item.user_id)&&"A"!==e.item.status?n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",link:"",to:"/contracts/edit/"+e.item.id}},[t._v(" "+t._s(t.$t("buttons.edit"))+" ")]):t._e(),n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary"},on:{click:function(n){return t.showDetails(e.item.id)}}},[t._v(" "+t._s(t.$t("buttons.details"))+" ")]),t.checkRole(["admin","sheikh"])&&null!==e.item.updated_by?n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"success"},on:{click:function(n){return t.confirmAccepted(e.item.id,"A")}}},[t._v(" "+t._s(t.$t("buttons.active"))+" ")]):t._e(),t.checkRole(["admin","sheikh"])?n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"danger"},on:{click:function(n){return t.confirmReject(e.item.id,"R")}}},[t._v(" "+t._s(t.$t("buttons.rejected"))+" ")]):t._e(),t.check(e.item.user_id)&&"A"!==e.item.status||t.checkRole(["admin"])?n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return t.confirmDelete(e.item.id)}}},[t._v(" "+t._s(t.$t("buttons.delete"))+" ")]):t._e(),t.checkRole(["sheikh"])?n("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(n){return t.showDate(e.item.id)}}},[t._v(" "+t._s(t.$t("buttons.date"))+" ")]):t._e()]}}])})],1)],1),n("contract-date",{attrs:{id:t.contractId}}),n("div",{staticClass:"mt-3"},[n("b-pagination",{attrs:{"total-rows":t.rows,align:"left","per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),n("company-details",{attrs:{obj:t.obj}})],1)},s=[],c=(n("caad"),n("2532"),n("205f")),i=n("a15b7"),o=n("b28b"),r=n("29a1"),l=n("1947"),u=n("26d2"),d=n("c074"),m=n("ecee"),f=n("8d94"),b=n("a0a2"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"EditContractDate","cancel-variant":"outline-secondary","ok-title":"تحديث","cancel-title":"الغاء",centered:"",size:"sm",title:"تعديل التصنيف"},on:{ok:t.update}},[n("validation-observer",{ref:"simpleRules"},[n("b-form",[n("b-row",[n("b-col",{attrs:{md:"12"}},[n("b-form-group",{attrs:{label:"اسم التصنيف","label-for":"name"}},[n("validation-provider",{attrs:{name:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("b-form-input",{attrs:{id:"name",type:"date",state:!(a.length>0)&&null},model:{value:t.dataDate,callback:function(e){t.dataDate=e},expression:"dataDate"}}),n("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}])})],1)],1)],1)],1)],1)],1)},p=[],g=(n("a9e3"),n("7bb1")),v=n("8f03"),C=n("11de"),$=n("8226"),_=n("4797"),w=n("6aac"),k=n("223c"),y={ar:{names:{name:"اسم التصنيف",type:"نوع التصنيف",image:"صورة التصنيف"}}};Object(g["d"])("ar",y.ar);var B={name:"EditContractDate",components:{ValidationProvider:g["b"],ValidationObserver:g["a"],BRow:i["a"],BCol:o["a"],BForm:C["a"],BFormGroup:$["a"],BFormInput:_["a"],BModal:w["a"],ToastificationContent:k["a"]},props:{id:{type:Number,default:0}},data:function(){return{dataId:"",dataDate:"",required:v["b"]}},watch:{id:function(){this.dataId=this.id}},methods:{update:function(){var t=this,e=this.dataDate;this.$http.put("user/contracts/update/date/".concat(this.dataId),{quran_date:e}).then((function(){t.$bvModal.hide("EditContractDate"),t.$toast({component:k["a"],props:{title:"تم تعديل التاريخ بنجاح",icon:"CheckCircleIcon",variant:"success"}})}))}}},x=B,D=n("2877"),P=Object(D["a"])(x,h,p,!1,null,"1a29153c",null),R=P.exports;m["c"].add(d["a"],d["c"],d["b"]);var j={name:"AllContracts",components:{BCard:c["a"],BRow:i["a"],BCol:o["a"],BTable:r["a"],BButton:l["a"],BPagination:u["a"],CompanyDetails:b["a"],ContractDate:R},data:function(){return{contractId:null,perPage:6,currentPage:1,add:!0,obj:{},busy:!0,file:null,fields:[{key:"id",label:this.$t("pages.newContracts.id")},{key:"created_at",label:this.$t("pages.newContracts.createdAt")},{key:"is_mosque",label:this.$t("pages.newContracts.isMosque")},{key:"status",label:this.$t("pages.newContracts.status")},{key:"actions",label:this.$t("pages.newContracts.action")}]}},computed:{rows:function(){return this.getContracts.length},getContracts:function(){return this.$store.state.contract.contracts}},created:function(){this.fetchPending()},methods:{fetchPending:function(){this.$store.dispatch("contract/fetch","Pending")},check:function(t){return!f["a"].userId()||!t||f["a"].userId()===t},checkRole:function(t){return t.includes(f["a"].role())},showDate:function(t){this.$bvModal.show("EditContractDate"),this.contractId=t},confirmAccepted:function(t,e){var n=this;this.$swal({title:this.$t("pages.newContracts.confirmAccepted.title"),text:this.$t("pages.newContracts.confirmAccepted.text"),icon:"question",showCancelButton:!0,confirmButtonText:this.$t("message.accept"),cancelButtonText:this.$t("message.cancel"),customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(a){if(a.value&&"A"===e){var s={contract_id:t,status:e};n.$store.dispatch("contract/active",s).then((function(){n.fetchPending(),n.$swal({icon:"success",title:n.$t("pages.newContracts.messageAccepted.title"),text:n.$t("pages.newContracts.messageAccepted.text"),customClass:{confirmButton:"btn btn-success"}})}))}}))},confirmReject:function(t,e){var n=this;this.$swal({title:this.$t("pages.newContracts.confirmReject.title"),text:this.$t("pages.newContracts.confirmReject.text"),icon:"question",showCancelButton:!0,confirmButtonText:this.$t("message.accept"),cancelButtonText:this.$t("message.cancel"),customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(a){if(a.value&&"R"===e){var s={contract_id:t,status:e};n.$store.dispatch("contract/active",s).then((function(){n.fetchPending(),n.$swal({icon:"success",title:n.$t("pages.newContracts.messageReject.title"),text:n.$t("pages.newContracts.messageReject.text"),customClass:{confirmButton:"btn btn-danger"}})}))}}))},confirmDelete:function(t){var e=this;this.$swal({title:this.$t("pages.newContracts.confirmDelete.title"),text:this.$t("pages.newContracts.confirmDelete.text"),icon:"question",showCancelButton:!0,confirmButtonText:this.$t("message.accept"),cancelButtonText:this.$t("message.cancel"),customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-outline-primary ml-1"},buttonsStyling:!1}).then((function(n){n.value&&e.$store.dispatch("contract/delete",t).then((function(){e.fetchPending(),e.$swal({icon:"success",title:e.$t("pages.newContracts.messageDelete.title"),text:e.$t("pages.newContracts.messageDelete.text"),customClass:{confirmButton:"btn btn-success"}})}))}))},showDetails:function(t){this.$router.push({name:"contractsShow",params:{id:t}})}}},A=j,q=Object(D["a"])(A,a,s,!1,null,"107f6d84",null);e["default"]=q.exports}}]);
//# sourceMappingURL=chunk-2d0b2b78.6323bd03.js.map